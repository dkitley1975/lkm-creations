{% extends "base.html" %}
{% load static %}
{% block metadescription %}
<!-- TODO -->
<link rel="canonical" href="#">
<meta name="description" content="Purchase as a gift our {{ product.name|title}} -
	{{ product.description|title|striptags|safe|truncatechars:100 }}">
<meta name="keywords" content="{{ product.keywords|title }}, {{ product.category|title }},
	{{ product.name|title }},{{ site_info.store_keywords|title }}">
<meta name="robots" content="index, follow">
{% endblock %}
{% block title %}LKM Creations Shop - Product - {{ product.name|title }}
{% endblock %}
{% block custom_page_stylesheet %} {% endblock %}
{% block content %}
<main class="px-3">
	<div class="row">
		<div class="col-10 offset-1 col-md-4 col-lg-4 offset-lg-2">
			<div class="image-container my-5">
				{% if product.image.url %}
				<a>
					<img class="img-fluid mx-auto d-block product-image-size
							rounded-10 box-shadow" src="{{ product.image.url }}"
						alt="{{ product.image_alt_text }}"
						oncontextmenu="return false;">
				</a>
				{% else %}
				<a href="#">
					<img class="img-fluid mx-auto d-block product-image-size
							rounded-10 box-shadow" src="{{ MEDIA_URL }}images/default_image.png"
						alt="{{ product.name|title }}">
				</a>
				{% endif %}
			</div>
		</div>
		<div class="col-10 offset-1 col-md-5 col-lg-4">
			<div class="mb-5 mt-md-5">
				<h1 id="product_name" class="mb-0 fs-2 fw-bold mb-4">
					{{ product.name|title }}
				</h1>
				<form class="form"
					action="{% url 'add_to_basket' product.id %}"
					method="POST">
					{% csrf_token %}
					<div id="add_to_basket" class="col-12 my-2">
						<div class="row">
							<div class="col-12">
								<p class="mt-3"><strong>Quantity:</strong></p>
								<div class="form-group">
									<input id="id_qty_{{ product.id }}"
										data-item_id="{{ product.id }}"
										class="form-control qty_input"
										type="number" {% comment %} TODO change
										max to stock value {% endcomment %}
										name="quantity" value="1" min="1"
										max="5">
								</div>
							</div>
							<div class="row justify-content-center mt-3 mx-0
								mb-2">
								<div class="col-12 col-md-6 text-center mx-0">
									<a type="button"
										class="btn btn-outline-secondary btn-md my-2 w-100"
										href="{% url 'products' %}">
										<i class="fs-5 bi bi-chevron-left">&nbsp;
										</i>
										<span class="text-uppercase small">
											Keep Shopping</span></a>
								</div>
								<div class="col-12 col-md-6 text-center mx-0">
									<button type="submit"
										id="add_to_basket_btn"
										value="Add to Basket" class="btn btn-primary btn-md
									text-uppercase small my-2 w-100">Add to Basket <i class=" fs-5 bi
										bi-cart-plus"></i></button>
								</div>
							</div>
							<input type="hidden" name="redirect_url"
								value="{{ request.path }}">
						</div>
						{% if product.sale_price %}
						<p
							class=" lead mb-0 text-left fw-bolder text-danger fst-italic">
							<s>
								was £<span
									class="fs-5">{{ product.retail_price }}</span></s>
						</p>
						<p class="lead mb-0 text-left fw-bolder"><span
								class="fst-italic">now only</span> £<span
								class="fs-3">{{ product.sale_price }}</span</p>
									{% else %} <p
									class="lead mb-0 text-left fw-bolder">
								£<span class="fs-3">{{ product.retail_price }}
									</span</p> {% endif %} <h2
										class="lead mb-0 text-left fw-bolder mt-3">
									Description</h2>
									<p>{{ product.description }}</p>
									{% if product.size %}
									<p
										class="lead mb-0 text-left fw-bolder mt-2 fs-5">
										Size: <span
											class="fw-normal fs-6">{{ product.size }}</span>
									</p>
									{% endif %}
									{% if product.weight %}
									<p
										class="lead mb-0 text-left fw-bolder mt-2 fs-5">
										Weight:<span class="fw-normal fs-6">
											{{ product.weight|floatformat }}
											grams</span>
									</p>
									{% endif %}
									{% if product.is_washable %}
									<p
										class="lead mb-0 text-left fw-bolder mt-2 fs-5">
										Washing instructions:<span
											class="fw-normal fs-6">
											{{ product.wash_instructions}}</span>
									</p>
									{% endif %}
									{% if product.care_instructions %}
									<p
										class="lead mb-0 text-left fw-bolder mt-2 fs-5">
										Care instructions:<span
											class="fw-normal fs-6">
											{{ product.care_instructions}}</span>
									</p>
									{% endif %}
									{% if product.sku %}
									<p
										class=" mb-0 text-start fw-bolder mt-1 fs-6">
										SKU:<span class="fw-normal fs-6">
											{{ product.sku }}</span>
									</p>
									{% endif %}
									{% if product.category.name %}
									<p class="small mt-1 mb-0">
										<a class="text-muted"
											href="/store/category/{{ product.category.slug }}">
											<i
												class="fs-5 bi bi-tags-fill"></i>
											{{ product.category.name }}</a>
									</p>
									{% endif %}
						</p>
					</div>
				</form>
			</div>
		</div>
</main>
{%endblock%}
{% block postloadjs %}
{{ block.super }}
{% endblock %}