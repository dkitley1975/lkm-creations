{% extends "base.html" %}
{% load static %}
{% block metadescription %}
<meta name="description" content="{{ site_info.store_description }}">
<meta name="keywords" content="{{ site_info.store_keywords|title }}">
<meta name="robots" content="noindex, nofollow">
{% endblock %}
{% block title %}LKM Creations User Profile Dashboard{% endblock %}
{% block custom_page_stylesheet %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}
{% block content %} <main class="container pt-2 px-5 mb-3">
	<section class="text-center pt-2">
		<h1 class="my-3 fs-1">User Dashboard</h1>
	</section>
	<div class="col-12 d-flex justify-content-between">
		<div>Manage your <b>orders</b> and personal details</div>
		<!-- Button trigger modal -->
		<div>
			<a href="" role="button" data-bs-toggle="modal"
				data-bs-target="#editProfileDetails" aria-expanded="false"
				class="text-black text-decoration-none">Change
				Details</a>
		</div>
	</div>
	<hr />
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-12 col-md-6 col-lg-8">
				<p class="text-muted mt-3">Your Orders</p>
				<div class="row">
					{% for orders in order_history %}
					<div class="col-12 col-lg-6 p1 mb-2">
						<div class="card box-shadow rounded-10">
							<div class="card-body order-history-card">
								<p class="card-title">
									<span class="fw-bolder">Order Number:
									</span>
									<span
										class="float-md-end me-1">{{ orders.order_number }}</span>
								</p>
								<p class="card-text">
									<span class="fw-bolder">Order Date:</span>
									<span class="float-md-end
												me-1">{{ orders.order_date|date:"D d M Y" }}</span>
								</p>
								<div class="d-none d-md-block">
									<p class="card-text">
										Order summary:</p>
									{% for item in orders.lineitems.all %}
									<p class="small">{{ item.quantity }} x
										{{ item.product.name|title }}</p>
									<hr>
									{% endfor%}
									<p class="card-text">
										<span class="fw-bolder">Order
											Total:
										</span><span class="float-md-end
												me-1">
											Â£{{ orders.order_grand_total }}</span>
									</p>
								</div>
							</div>
							<div class="card-footer">
								<div class="row content-align-end">

									<div class="col-12"><a
											href="/dashboard/order-summary/{{orders.order_number}}"
											class="btn btn-primary">View
											Order</a></div>
								</div>
							</div>
						</div>
					</div>
					{% endfor %}
				</div>
			</div>
			<div class="col-12 col-md-6  col-lg-4  border-start ps-3">
				<p class="text-muted mt-3">Default Delivery Address</p>
				<form class="mt-3" action="{% url "dashboard" %}" method="POST"
					id="profile-update-form">
					{% csrf_token %}
					{{ form|crispy }}
					<button class="btn btn-primary mb-3 float-right">
						Update Details</button>
				</form>
			</div>
		</div>
		<!-- Modal -->
		<div class="modal fade" id="editProfileDetails" tabindex="-1"
			aria-labelledby="editProfileDetailsLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editProfileDetailsLabel">
							Edit Profile Details
						</h5>
						<button type="button" class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						...
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary">Save
							changes</button>
					</div>
				</div>
			</div>
		</div>
</main>
{%endblock%}
{% block postloadjs %}
{{ block.super }}
<script type="text/javascript" src="{% static 'js/countryfield.js' %}">
</script>
{% endblock %}
